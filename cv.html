<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CV - Önizleme</title>
  <style>
    body { margin:0; background:#0b0b0b; color:#fff; font-family: Arial, Helvetica, sans-serif; }
    html, body{
  height: auto !important;
  overflow: auto !important;
}

.wrap{
  overflow: auto !important;
  -webkit-overflow-scrolling: touch;
}

#paper{
  overflow: visible !important;
}
    .bar{
      position: sticky; top:0; z-index:10;
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
      padding:10px 12px; background:#0b0b0b; border-bottom:1px solid #222;
    }
    .btn{ padding:10px 12px; background:#2b6cb0; color:#fff; border:0; border-radius:10px; font-weight:600; }
    select{ padding:10px 12px; border-radius:10px; border:1px solid #333; background:#111; color:#fff; }
    .wrap { display:flex; justify-content:center; padding:16px; }
    /* A4 oranında preview */
    #paper{
      width: 210mm; min-height: 297mm;
      background:#fff; color:#111;
      box-shadow: 0 10px 30px rgba(0,0,0,.5);
    }
    /* ✅ TEMPLATE CLIP FIX (screen + print) */
#paper { height: auto !important; overflow: visible !important; }
#paper .page { height: auto !important; min-height: 297mm !important; overflow: visible !important; }
html, body { height: auto !important; overflow: auto !important; }

    @media (max-width: 900px) {
      #paper { width: 100%; min-height: auto; }
    }

    /* Yazdırırken sadece CV gelsin */
    @media print {
  /* iOS/Safari fix: sayfa kesilmesin */
  html, body {
    background:#fff;
    height: auto !important;
    overflow: visible !important;
  }
      #paper { height: auto !important; overflow: visible !important; }
#paper .page { height: auto !important; min-height: 297mm !important; overflow: visible !important; }

  .bar { display:none !important; }

  .wrap {
    padding: 0 !important;
    height: auto !important;
    overflow: visible !important;
    display: block !important;
  }

  #paper{
    box-shadow:none !important;
    width:auto !important;
    height:auto !important;
    min-height:auto !important;
    overflow: visible !important;
  }

  @page { size: A4; margin: 0; }

  * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
}

  </style>
</head>
<body>
  <div class="bar">
    <button class="btn" id="printBtn">PDF indir (Yazdır)</button>

    <select id="mode">
      <option value="design">Tasarım (Modern)</option>
      <option value="ats">ATS (Sade)</option>
    </select>

    <span style="opacity:.85;font-size:14px;">Mod seç → PDF indir</span>
  </div>

  <div class="wrap">
    <div id="paper"></div>
  </div>

  <script type="module">
    import { renderCV } from "./scripts/render.js";
    const qs = new URLSearchParams(location.search);
const lang = (qs.get("lang") || "en").toLowerCase();
window.__cv_lang = lang;

    const paper = document.getElementById("paper");
    const modeSelect = document.getElementById("mode");
    const printBtn = document.getElementById("printBtn");

    async function refresh() {
      const mode = modeSelect.value;
      const html = await renderCV({ mode, lang });
      paper.innerHTML = html;
    }

    modeSelect.addEventListener("change", refresh);
printBtn.addEventListener("click", () => window.print());

// analyze sayfasından gelen modu uygula: /cv.html#mode=ats veya #mode=design
const hash = (location.hash || "");
if (hash.includes("mode=ats")) modeSelect.value = "ats";
if (hash.includes("mode=design")) modeSelect.value = "design";

refresh();
    document.getElementById("y") && (document.getElementById("y").textContent = new Date().getFullYear());
  </script>
  <footer style="margin-top:40px;padding:22px 0;border-top:1px solid rgba(0,0,0,.08);color:#6b7280;font-size:13px;">
  <div style="max-width:980px;margin:auto;padding:0 20px;display:flex;gap:14px;flex-wrap:wrap;align-items:center;justify-content:space-between;">
    <div>© <span id="y"></span> ResumeAI</div>
    <div style="display:flex;gap:14px;flex-wrap:wrap;">
      <a href="/terms.html">Terms</a>
      <a href="/privacy.html">Privacy</a>
      <a href="/refund.html">Refunds</a>
      <a href="mailto:support@resumeai.work">Support</a>
    </div>
  </div>
</footer>
</body>
</html>
